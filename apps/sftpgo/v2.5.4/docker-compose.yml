version: '3'
services:
  sftpgo:
    image: drakkan/sftpgo:v2.5.4-alpine
    container_name: ${CONTAINER_NAME}
    networks:
      - 1panel-network
    ports:
      - ${PANEL_APP_PORT_HTTP}:8080
      - ${SFTP_PORT}:${SFTP_PORT}
      - ${FTP_PORT}:${FTP_PORT}
      - ${PASSIVE_PORT_RANGE_START}-${PASSIVE_PORT_RANGE_END}:${PASSIVE_PORT_RANGE_START}-${PASSIVE_PORT_RANGE_END}
      - ${WEBDAV_PORT}:${WEBDAV_PORT}
    environment:
      SFTPGO_FTPD__BINDINGS__0__PORT: ${FTP_PORT}
      SFTPGO_WEBDAVD__BINDINGS__0__PORT: ${WEBDAV_PORT}
      SFTPGO_SFTPD__BINDINGS__0__PORT: ${SFTP_PORT}
      SFTPGO_FTPD__BINDINGS__0__FORCE_PASSIVE_IP: ${FTP_EXTERNAL_IP}
      SFTPGO_FTPD__PASSIVE_PORT_RANGE__START: ${PASSIVE_PORT_RANGE_START}
      SFTPGO_FTPD__PASSIVE_PORT_RANGE__END: ${PASSIVE_PORT_RANGE_END}
    volumes:
      - ./data/data:/srv/sftpgo
      - ./data/config:/var/lib/sftpgo
    labels:
      createdBy: "Apps"
networks:
  1panel-network:
    external: true