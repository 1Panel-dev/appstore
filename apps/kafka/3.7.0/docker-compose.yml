version: '3'
services:
  kafka:
    container_name: ${CONTAINER_NAME}
    restart: always
    environment:
      # Environment variables used by kafka scripts will be needed in case of File input.
      CLUSTER_ID: '4L6g3nShT-eMCtK--X86sw'
      # Set properties not provided in the file input
      KAFKA_NODE_ID: 1
      KAFKA_CONTROLLER_QUORUM_VOTERS: '1@${CONTAINER_NAME}:29093'
      KAFKA_LISTENERS: 'CONTROLLER://:29093,PLAINTEXT_HOST://:9092,PLAINTEXT://:19092'
      # Override an existing property
      KAFKA_PROCESS_ROLES: 'broker,controller'
      KAFKA_ADVERTISED_LISTENERS: 'PLAINTEXT_HOST://${CONTAINER_NAME}:${PANEL_APP_PORT_HTTP},PLAINTEXT://${CONTAINER_NAME}:19092'
    volumes:
      - ./config:/mnt/shared/config
    networks:
      - 1panel-network
    ports:
      - "${PANEL_APP_PORT_HTTP}:9092"
    image: apache/kafka:3.7.0
    labels:
      createdBy: "Apps"
networks:  
  1panel-network:  
    external: true
